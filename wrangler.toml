# Cloudflare Pages configuration
# See: https://developers.cloudflare.com/pages/

name = "producer-hub"
compatibility_date = "2024-12-29"

# Build configuration
[build]
command = "npm run build:cloudflare"
cwd = "."

# Cloudflare Pages functions (if needed in future)
# [functions]
# build = "functions"

# Environment variables for production
[vars]
NODE_VERSION = "20"

# Headers for PWA and caching
[[headers]]
for = "/manifest.webmanifest"
[headers.values]
Content-Type = "application/manifest+json"
Cache-Control = "public, max-age=604800"

[[headers]]
for = "/sw.js"
[headers.values]
Cache-Control = "no-cache, no-store, must-revalidate"
Service-Worker-Allowed = "/"

[[headers]]
for = "/workbox-*.js"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/_app/immutable/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/icons/*"
[headers.values]
Cache-Control = "public, max-age=604800"

[[headers]]
for = "/ads.txt"
[headers.values]
Cache-Control = "public, max-age=86400"

# Security headers
[[headers]]
for = "/*"
[headers.values]
X-Content-Type-Options = "nosniff"
X-Frame-Options = "DENY"
Referrer-Policy = "strict-origin-when-cross-origin"

